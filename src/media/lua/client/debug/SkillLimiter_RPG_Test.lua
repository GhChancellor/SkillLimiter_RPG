---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by lele.
--- DateTime: 14/10/23 16:22
---

require("lib/CharacterBaseObj")
require("SL")

local characterCreation = require("CharacterCreation")
local characterLib = require("CharacterLib")
local dataValidator = require("lib/DataValidator")
local debugDiagnostics = require("lib/DebugDiagnostics")
local modDataManager = require("lib/ModDataManager")
local perkFactoryPZ = require("lib/PerkFactoryPZ")
local skillLimiter = require("SkillLimiter")

local CreateCharacterMaxSkillObj = CharacterBaseObj:new()

--[[
    if not character then
        errHandler.errMsg("CharacterPz.getProfession_PZ(character)",
                errHandler.err.IS_NULL_CHARACTERS)
        return nil
    end
]]

local skillLimiter_RPG_TDD = {}

function skillLimiter_RPG_TDD.characterStats(CharacterObj, displayName)
    debugDiagnostics.printLine()

    for i, v in pairs(CharacterObj:getPerkDetails()) do
        print(displayName .. " >> " ..
                tostring(v:getPerk()) .. " - " ..
                tostring(v:getLevel()) .. " - " ..
                tostring(v:getXp()))
    end

    debugDiagnostics.printLine()
end

--- **Display Character Details**
---@param character IsoGameCharacter
---@return void
--- - IsoGameCharacter : zombie.characters.IsoGameCharacter
function skillLimiter_RPG_TDD.displayCharacterDetails(character)
    local CharacterCreationObj = characterCreation.getCharacterCreation(character)
    local CharacterProfessionObj = characterLib.getPerkProfession(character)
    local CharacterTraitsPerkObj = characterLib.getTraitsPerk(character)
    local CharacterAllPerkObj = characterLib.getAllPerks(character)
    local CharacterMaxSkillObj = skillLimiter.initCharacter()

    skillLimiter_RPG_TDD.characterStats(CharacterAllPerkObj, "All Perk")

    print("profession " .. CharacterProfessionObj:getProfession())
    skillLimiter_RPG_TDD.characterStats(CharacterProfessionObj, "Profession Traits/Perk")
    skillLimiter_RPG_TDD.characterStats(CharacterTraitsPerkObj, "Traits Perk")
    skillLimiter_RPG_TDD.characterStats(CharacterMaxSkillObj, "Max Skill")
end

function skillLimiter_RPG_TDD.modData_TDD()
    local characterMaxSkillModData = "characterMaxSkill"

    modDataManager.save(characterMaxSkillModData, "value")

    debugDiagnostics.checkTest(modDataManager.isExists(characterMaxSkillModData),
            true, "Save moddata" )

    modDataManager.remove(characterMaxSkillModData)

    debugDiagnostics.checkTest(modDataManager.isExists(characterMaxSkillModData),
            false, "Remove moddata" )
end

---Set Level
---@param character IsoGameCharacter
--- - IsoGameCharacter : zombie.characters.IsoGameCharacter
function skillLimiter_RPG_TDD.setLevelperk(character)
    local five = 5
    local seven = 7
    local ten = 10

    --- **Passive**
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.FITNESS, ten)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.STRENGTH, ten)

    --- **Agility**
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.SPRINTING, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.LIGHTFOOT, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.NIMBLE, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.SNEAK, five)

    --- **Combat**
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.AXE, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.LONGBLUNT, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.SMALLBLUNT, seven)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.LONGBLADE, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.SMALLBLADE, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.SPEAR, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.MAINTENANCE, seven)

    --- **Crafting**
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.WOODWORK, ten)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.COOKING, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.FARMING, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.DOCTOR, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.ELECTRICITY, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.METALWELDING, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.MECHANICS, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.TAILORING, five)

    --- **Firearm**
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.AIMING, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.RELOADING, five)

    -- **Survivalist**
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.FISHING, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.TRAPPING, five)
    debugDiagnostics.setPerkLevel(character, debugDiagnostics.Perks.PLANTSCAVENGING, five)
end

return skillLimiter_RPG_TDD